

<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>LRGB stacking processing in Siril 1.4.1 on Mac - </title>

  <meta name="description" content="Introduction
Three months ago, I wrote an article on color compositing LRGB images captured with RicoRem-Ricoh&rsquo;s remote telescope . Targeting NGC 1566, I stacked multiple images exposed with each LRGB filter. For my own reference as well, I summarize the processing steps here."><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "akenji\u0027s lab",
    
    "url": "https:\/\/akenji3.github.io\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/akenji3.github.io\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/akenji3.github.io\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/akenji3.github.io\/en\/post\/20260223_stacking_siril141\/",
          "name": "Lrgb stacking processing in siril 1.4.1 on MAC"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : ""
  },
  "headline": "LRGB stacking processing in Siril 1.4.1 on Mac",
  "description" : "Introduction Three months ago, I wrote an article on color compositing LRGB images captured with RicoRem-Ricoh\u0026rsquo;s remote telescope . Targeting NGC 1566, I stacked multiple images exposed with each LRGB filter. For my own reference as well, I summarize the processing steps here.\n",
  "inLanguage" : "en",
  "wordCount":  1243 ,
  "datePublished" : "2026-02-23T00:00:00\u002b00:00",
  "dateModified" : "2026-02-23T00:00:00\u002b00:00",
  "image" : "https:\/\/akenji3.github.io\/img\/avatar-icon.png",
  "keywords" : [ "siril, 1.4.1, RicoRemo" ],
  "mainEntityOfPage" : "https:\/\/akenji3.github.io\/en\/post\/20260223_stacking_siril141\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/akenji3.github.io\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/akenji3.github.io\/img\/avatar-icon.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>


<meta property="og:title" content="LRGB stacking processing in Siril 1.4.1 on Mac" />
<meta property="og:description" content="Introduction
Three months ago, I wrote an article on color compositing LRGB images captured with RicoRem-Ricoh&rsquo;s remote telescope . Targeting NGC 1566, I stacked multiple images exposed with each LRGB filter. For my own reference as well, I summarize the processing steps here.">
<meta property="og:image" content="https://akenji3.github.io/img/avatar-icon.png" />
<meta property="og:url" content="https://akenji3.github.io/en/post/20260223_stacking_siril141/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="akenji&#39;s lab" />

  <meta name="twitter:title" content="LRGB stacking processing in Siril 1.4.1 on Mac" />
  <meta name="twitter:description" content="Introduction
Three months ago, I wrote an article on color compositing LRGB images captured with RicoRem-Ricoh&rsquo;s remote telescope . Targeting NGC 1566, I stacked multiple images exposed with …">
  <meta name="twitter:image" content="https://akenji3.github.io/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <link href='https://akenji3.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.147.1">
  <link rel="alternate" href="https://akenji3.github.io/en/index.xml" type="application/rss+xml" title="akenji&#39;s lab"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.6.0/css/all.css" integrity="sha384-h/hnnw1Bi4nbpD6kE7nYfCXzovi622sY5WBxww8ARKwpdLj5kUWjRuyiXaD1U2JT" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="https://akenji3.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://akenji3.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://akenji3.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-TGXWYJXF48"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-TGXWYJXF48');
        }
      </script>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://akenji3.github.io/en/">akenji&#39;s lab</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/en/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/en/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Categories" href="/en/categories">Categories</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/en/tags">Tags</a>
            </li>
          
        

        
          
            <li>
              
                
                  <a href="https://akenji3.github.io/post/20260223_stacking_siril141/">ja</a>
                
              
            </li>
          
        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="akenji&#39;s lab" href="https://akenji3.github.io/en/">
            <img class="avatar-img" src="https://akenji3.github.io/img/avatar-icon.png" alt="akenji&#39;s lab" />
           
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>LRGB stacking processing in Siril 1.4.1 on Mac</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on February 23, 2026
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  &nbsp;&bull;&nbsp;Other languages: <a href="https://akenji3.github.io/post/20260223_stacking_siril141/" lang="ja">ja</a>
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <h2 id="introduction">Introduction</h2>
<p>Three months ago, I wrote an article on color compositing LRGB images captured with <a href="https://akenji3.github.io/en/post/20251115_astrophoto/">RicoRem</a>-Ricoh&rsquo;s remote telescope . Targeting NGC 1566, I stacked multiple images exposed with each LRGB filter. For my own reference as well, I summarize the processing steps here.</p>
<ol>
<li>
<h2 id="related-information">Related Information</h2>
<ol>
<li><a href="https://www.astrophotography.jp/">Ricorimo</a> - Used the 50cm telescope at Siding Spring Observatory in Australia. Ricorimo images can be downloaded not only as raw data but also as calibrated data with dark and flat corrections applied. Calibrated data was used.</li>
<li><a href="https://siril.org/">Siril</a> - The astro-imaging software used this time. Stacking was done using Siril 1.4.1 running on a MacBook Air. Just checked the homepage, and it seems 1.4.2 was released on 2/18!</li>
<li><a href="https://chatgpt.com/">ChatGPT</a> - Used this to plan the observation.</li>
<li><a href="https://claude.ai/">Claude</a> - Used this to process and compile the images. Quickly created shell scripts, speeding up the process.</li>
</ol>
</li>
</ol>
<h2 id="image-processing">Image Processing</h2>
<h3 id="stacking-procedure">Stacking Procedure</h3>
<h4 id="prerequisites">Prerequisites</h4>
<h5 id="target--exposure-times">Target &amp; Exposure Times</h5>
<ul>
<li>
<p>Target    NGC1566</p>
</li>
<li>
<p>L-band Images    January 21, 2026, 22:10:44–22:49:26 (180 sec each, 10 frames)</p>
</li>
<li>
<p>R Images    January 21, 2026, 22:49:57–22:59:37, 120 seconds each, 4 frames</p>
</li>
<li>
<p>G Images    January 21, 2026, 23:00:07–23:09:50, 120 seconds each, 4 frames</p>
</li>
<li>
<p>B Images    2026/1/21 23:10:20-23:20:01 120 seconds each, 4 frames ※ Stacking processed after excluding 1 defective image</p>
</li>
</ul>
<h5 id="directory-structure">Directory Structure</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">NGC1566/
</span></span><span class="line"><span class="cl">  └── lights/
</span></span><span class="line"><span class="cl">      ├── calibrated-...-Luminance-...-001.fit
</span></span><span class="line"><span class="cl">      ├── calibrated-...-Luminance-...-002.fit
</span></span><span class="line"><span class="cl">      ├── calibrated-...-Red-...-001.fit
</span></span><span class="line"><span class="cl">      ├── calibrated-...-Green-...-001.fit
</span></span><span class="line"><span class="cl">      └── calibrated-...-Blue-...-001.fit
</span></span></code></pre></div><h5 id="target-configuration-after-processing">Target Configuration After Processing</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">NGC1566/
</span></span><span class="line"><span class="cl">  ├── L_stacked.fit
</span></span><span class="line"><span class="cl">  ├── R_stacked.fit
</span></span><span class="line"><span class="cl">  ├── G_stacked.fit
</span></span><span class="line"><span class="cl">  ├── B_stacked.fit
</span></span><span class="line"><span class="cl">  ├── lights/
</span></span><span class="line"><span class="cl">  ├── L/
</span></span><span class="line"><span class="cl">  ├── R/
</span></span><span class="line"><span class="cl">  ├── G/
</span></span><span class="line"><span class="cl">  └── B/
</span></span></code></pre></div><hr>
<p>Step 1: Batch Rename Files and Organize Directories</p>
<p>1-1. Create a Shell Script</p>
<p>Execute the following in Terminal:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> ~/workspace/astro-image/NGC1566
</span></span><span class="line"><span class="cl">nano rename_move_lrgb.sh
</span></span></code></pre></div><p>Even if it&rsquo;s not nano, use an editor you&rsquo;re comfortable with.</p>
<p>1-2. Script Content</p>
<p>Paste the following content:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 作業ディレクトリの確認</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">&#34;lights&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Error: &#39;lights&#39; directory not found!&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 必要なディレクトリを作成</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Checking and creating directories...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> dir in L R G B<span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">&#34;</span><span class="nv">$dir</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        mkdir <span class="s2">&#34;</span><span class="nv">$dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;Created directory: </span><span class="nv">$dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;Directory already exists: </span><span class="nv">$dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># lightsディレクトリに移動</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> lights
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Starting LRGB file renaming and moving...&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 関数：リネームと移動</span>
</span></span><span class="line"><span class="cl">rename_and_move<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">filter</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">prefix</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">count</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">for</span> file in calibrated-*-<span class="si">${</span><span class="nv">filter</span><span class="si">}</span>-*.fit<span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$file</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># ファイル名から番号を抽出（macOS対応）</span>
</span></span><span class="line"><span class="cl">            <span class="nv">number</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$file</span><span class="s2">&#34;</span> <span class="p">|</span> sed -E <span class="s1">&#39;s/.*-([0-9]{3})\.fit$/\1/&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">            <span class="nv">newname</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">prefix</span><span class="si">}</span><span class="s2">_</span><span class="si">${</span><span class="nv">number</span><span class="si">}</span><span class="s2">.fit&#34;</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="c1"># リネームして親ディレクトリの該当フォルダに移動</span>
</span></span><span class="line"><span class="cl">            mv <span class="s2">&#34;</span><span class="nv">$file</span><span class="s2">&#34;</span> <span class="s2">&#34;../</span><span class="si">${</span><span class="nv">prefix</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">newname</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;Moved: </span><span class="nv">$file</span><span class="s2"> -&gt; </span><span class="si">${</span><span class="nv">prefix</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">newname</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="o">((</span>count++<span class="o">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="nv">$count</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;Warning: No </span><span class="si">${</span><span class="nv">filter</span><span class="si">}</span><span class="s2"> files found&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;Processed </span><span class="si">${</span><span class="nv">count</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">filter</span><span class="si">}</span><span class="s2"> files&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 各フィルターを処理</span>
</span></span><span class="line"><span class="cl">rename_and_move <span class="s2">&#34;Luminance&#34;</span> <span class="s2">&#34;L&#34;</span>
</span></span><span class="line"><span class="cl">rename_and_move <span class="s2">&#34;Red&#34;</span> <span class="s2">&#34;R&#34;</span>
</span></span><span class="line"><span class="cl">rename_and_move <span class="s2">&#34;Green&#34;</span> <span class="s2">&#34;G&#34;</span>
</span></span><span class="line"><span class="cl">rename_and_move <span class="s2">&#34;Blue&#34;</span> <span class="s2">&#34;B&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 元のディレクトリに戻る</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ..
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;=============================&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;All LRGB files processed successfully!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;File distribution:&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;  L/ : </span><span class="k">$(</span>ls -1 L/*.fit 2&gt;/dev/null <span class="p">|</span> wc -l <span class="p">|</span> tr -d <span class="s1">&#39; &#39;</span><span class="k">)</span><span class="s2"> files&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;  R/ : </span><span class="k">$(</span>ls -1 R/*.fit 2&gt;/dev/null <span class="p">|</span> wc -l <span class="p">|</span> tr -d <span class="s1">&#39; &#39;</span><span class="k">)</span><span class="s2"> files&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;  G/ : </span><span class="k">$(</span>ls -1 G/*.fit 2&gt;/dev/null <span class="p">|</span> wc -l <span class="p">|</span> tr -d <span class="s1">&#39; &#39;</span><span class="k">)</span><span class="s2"> files&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;  B/ : </span><span class="k">$(</span>ls -1 B/*.fit 2&gt;/dev/null <span class="p">|</span> wc -l <span class="p">|</span> tr -d <span class="s1">&#39; &#39;</span><span class="k">)</span><span class="s2"> files&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;=============================&#34;</span>
</span></span></code></pre></div><p>**Saving method: (for nano) **</p>
<ul>
<li>Press <code>Ctrl + O</code> to save</li>
<li>Press <code>Ctrl + X</code> to exit</li>
</ul>
<h6 id="parameter-explanation">Parameter Explanation</h6>
<ul>
<li><code>sed -E 's/.*-([0-9]{3})\.fit$/\1/'</code>
<ul>
<li><code>-E</code>: Use extended regular expressions</li>
<li><code>.*-([0-9]{3})\.fit$</code>: Extract the three-digit number at the end of the filename</li>
<li><code>\1</code>: Output the matched number portion</li>
</ul>
</li>
</ul>
<h5 id="1-3-executing-the-script">1-3. Executing the Script</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 実行権限を付与</span>
</span></span><span class="line"><span class="cl">chmod +x rename_move_lrgb.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 実行</span>
</span></span><span class="line"><span class="cl">./rename_move_lrgb.sh
</span></span></code></pre></div><hr>
<p>Step 2: Alignment and Stacking in Siril</p>
<p>2-1. Processing the L Channel (Luminance)</p>
<p>(1) Launch Siril and execute the following in the command line:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Lディレクトリに移動</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ~/workspace/astro-image/NGC1566/L
</span></span></code></pre></div><ul>
<li><strong>Parameter Description:</strong>
<ul>
<li><code>cd</code>: Change Directory - Change the working directory</li>
</ul>
</li>
</ul>
<h6 id="2-alignmentregistration">(2) Alignment（Registration）</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">register L_ -prefix<span class="o">=</span>r_
</span></span></code></pre></div><p><strong>Parameter Description:</strong></p>
<ul>
<li><code>L_</code>: Pattern for target files (automatically detects L_001.fit, L_002.fit&hellip;)</li>
<li><code>-prefix=r_</code>: Prefix for output files (creates r_L_001.fit, r_L_002.fit&hellip;)</li>
</ul>
<p><strong>Processing Details:</strong></p>
<ul>
<li>Uses <code>Global Star Alignment (deep-sky)</code> method by default</li>
<li>Detects stars in each image and aligns their positions</li>
<li>Transformation method: Shift + Rotation (translation and rotation)</li>
<li>All files are positionally adjusted relative to the reference image (usually the first image)</li>
</ul>
<h6 id="3-stacking">(3) Stacking</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">stack r_L_ rej <span class="m">3</span> <span class="m">3</span> -norm<span class="o">=</span>additive -out<span class="o">=</span>../L_stacked
</span></span></code></pre></div><p><strong>Parameter Description:</strong></p>
<ul>
<li><code>r_L_</code>: Pattern for stacking target files (aligned files)</li>
<li><code>rej 3 3</code>: Pixel rejection method
<ul>
<li><code>rej</code>: Uses Winsorized Sigma Clipping</li>
<li>First <code>3</code>: Lower sigma value (threshold for removing low values)</li>
<li>Second <code>3</code>: Upper sigma value (threshold for removing high values)</li>
<li>Removes outliers exceeding 3σ (hot pixels, cosmic rays, etc.)</li>
</ul>
</li>
<li><code>-norm=additive</code>: Normalization method
<ul>
<li><code>additive</code>: Additive normalization (aligns brightness across images)</li>
<li>Other options: <code>mul</code> (multiplication), <code>none</code> (no normalization)</li>
</ul>
</li>
<li><code>-out=../L_stacked</code>: Output filename
<ul>
<li><code>../</code>: Outputs to parent directory</li>
<li>Extension <code>.fit</code> is automatically appended</li>
</ul>
</li>
</ul>
<p><strong>Processing details:</strong></p>
<ul>
<li>Average stacking is the default</li>
<li>Reduces noise and improves signal-to-noise ratio (SNR)</li>
<li>Generates clean images by removing outliers</li>
</ul>
<h5 id="2-2-r-channel">2-2. R Channel&hellip;</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Rディレクトリに移動</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ../R
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 位置合わせ</span>
</span></span><span class="line"><span class="cl">register R_ -prefix<span class="o">=</span>r_
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># スタッキング</span>
</span></span><span class="line"><span class="cl">stack r_R_ rej <span class="m">3</span> <span class="m">3</span> -norm<span class="o">=</span>additive -out<span class="o">=</span>../R_stacked
</span></span></code></pre></div><h5 id="2-3-processing-the-g-channel-green">2-3. Processing the G Channel (Green)</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Gディレクトリに移動</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ../G
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 位置合わせ</span>
</span></span><span class="line"><span class="cl">register G_ -prefix<span class="o">=</span>r_
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># スタッキング</span>
</span></span><span class="line"><span class="cl">stack r_G_ rej <span class="m">3</span> <span class="m">3</span> -norm<span class="o">=</span>additive -out<span class="o">=</span>../G_stacked
</span></span></code></pre></div><h5 id="2-4-processing-channel-b-blue">2-4. Processing Channel B (Blue)</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Bディレクトリに移動</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ../B
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 位置合わせ</span>
</span></span><span class="line"><span class="cl">register B_ -prefix<span class="o">=</span>r_
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># スタッキング</span>
</span></span><span class="line"><span class="cl">stack r_B_ rej <span class="m">3</span> <span class="m">3</span> -norm<span class="o">=</span>additive -out<span class="o">=</span>../B_stacked
</span></span></code></pre></div><hr>
<p>Step 3: Verifying Results</p>
<p>3-1. Checking the Output Files</p>
<p>Verify that the following files have been created in the parent directory (NGC1566/):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> ~/workspace/astro-image/NGC1566
</span></span><span class="line"><span class="cl">ls -lh *.fit
</span></span></code></pre></div><p>Expected output:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">L_stacked.fit
</span></span><span class="line"><span class="cl">R_stacked.fit
</span></span><span class="line"><span class="cl">G_stacked.fit
</span></span><span class="line"><span class="cl">B_stacked.fit
</span></span></code></pre></div><p>3-2. Verifying Stacking Quality</p>
<p>Check logs in Siril:</p>
<ul>
<li>Pixel removal rate around 0.5% - 2% is normal</li>
<li>If removal rate is too high (&gt;5%), sigma value adjustment may be needed</li>
</ul>
<hr>
<h3 id="lrgb-stacking">LRGB Stacking</h3>
<p>Use the [LRGB]_stacked.fit file output earlier for each filter image in the &ldquo;Image Processing&rdquo; steps of <a href="https://akenji3.github.io/en/post/20251115_astrophoto/">this article</a>.
Once this process can be performed via command line, I plan to document it separately.</p>
<hr>
<h2 id="summary">Summary</h2>
<p>Image obtained from the above steps:</p>
<p><img src="/images/20260223_Stacking_Sirril141/NGC1566.png" alt="NGC1566"></p>
<p>Next, I want to photograph galaxies with dark lanes and supernova remnants.</p>
<hr>

        
          <div class="blog-tags">
            
              
              <a href="https://akenji3.github.io/en/tags/siril/">siril</a>&nbsp;
            
              
              <a href="https://akenji3.github.io/en/tags/1.4.1/">1.4.1</a>&nbsp;
            
              
              <a href="https://akenji3.github.io/en/tags/ricoremo/">RicoRemo</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fakenji3.github.io%2fen%2fpost%2f20260223_stacking_siril141%2f&amp;text=LRGB%20stacking%20processing%20in%20Siril%201.4.1%20on%20Mac&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fakenji3.github.io%2fen%2fpost%2f20260223_stacking_siril141%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fakenji3.github.io%2fen%2fpost%2f20260223_stacking_siril141%2f&amp;title=LRGB%20stacking%20processing%20in%20Siril%201.4.1%20on%20Mac" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fakenji3.github.io%2fen%2fpost%2f20260223_stacking_siril141%2f&amp;title=LRGB%20stacking%20processing%20in%20Siril%201.4.1%20on%20Mac" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fakenji3.github.io%2fen%2fpost%2f20260223_stacking_siril141%2f&amp;title=LRGB%20stacking%20processing%20in%20Siril%201.4.1%20on%20Mac" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fakenji3.github.io%2fen%2fpost%2f20260223_stacking_siril141%2f&amp;description=LRGB%20stacking%20processing%20in%20Siril%201.4.1%20on%20Mac" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          
            
          

          
                  <h4 class="see-also">See also</h4>
                  <ul>
                
                
                    <li><a href="/en/post/20251115_astrophoto/">Capturing the Galaxy with RicoRem(Ricoh&#39;s remote telescope)</a></li>
                
              </ul>

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://akenji3.github.io/en/post/20260103_uv-docker/" data-toggle="tooltip" data-placement="top" title="Connecting to a Python development environment in a remote Docker container from VSCode">&larr; Previous Post</a>
            </li>
          
          
        </ul>
      


      

    </div>
  </div>
</div>

      <footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2026
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://akenji3.github.io/en/">akenji&#39;s lab</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.147.1</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="https://akenji3.github.io/js/main.js"></script>
<script src="https://akenji3.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://akenji3.github.io/js/load-photoswipe.js"></script>










    
  </body>
</html>

